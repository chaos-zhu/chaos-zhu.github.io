(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{402:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"腾讯云免费ssl证书配置及nginx反向代理配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云免费ssl证书配置及nginx反向代理配置"}},[t._v("#")]),t._v(" 腾讯云免费ssl证书配置及nginx反向代理配置")]),t._v(" "),a("ul",[a("li",[t._v("nginx配置文件目录：vim /etc/nginx/nginx.conf")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" # 监听"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("端口，https的默认端口\n        server_name  zhulijun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("club"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" # 这里是申请证书所用到的域名\n        ssl on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ssl_certificate "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("_zhulijun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("club_bundle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("# 证书文件名称\n        ssl_certificate_key "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("_zhulijun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("club"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("# 私钥文件名称\n        ssl_session_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ssl_protocols TLSv1 TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" #请按照这个协议配置\n        ssl_ciphers "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ECDHE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RSA")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AES128")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GCM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SHA256")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HIGH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("aNULL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MD5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RC4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DHE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("#请按照这个套件配置\n        ssl_prefer_server_ciphers on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        root         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        gzip on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" # 开启gzip压缩，可以大幅度优化前端页面打开速度\n        client_max_body_size  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" # 设置上传的压缩文件大小，不设置有可能会报"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("413")]),t._v(" Request Entity Too Large的错误\n        # 以下为压缩的类型，更多文件类型压缩自行百度\n        gzip_types text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("javascript text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("css application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xml text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("httpd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("php image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jpeg image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gif image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("png image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        # Load configuration files "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" server block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        include "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*.conf;\n\n        # WebSocket 配置，此段与反向代理可忽略\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n\n        # location / {\n        # 微信小程序反向代理\n        #       proxy_pass http://127.0.0.1:8765; \n        # }\n\n        # 返回代理只需要配置location字段即可，非常简单。\n        # 注意：规则很重要，写错了就反向代理失败\n        location /api/ {\n        # 移动端项目反向代理\n                proxy_pass https://127.0.0.1:3000/; # 最后的斜杠不能少，否则路由不到，代理失败\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n    }\n\n  # 以下这个server可以让用户自动跳转到https协议下的域名\n    server {\n        listen 80;\n        server_name zhulijun.club; #填写绑定证书的域名\n        rewrite ^(.*)$ https://$host$1 permanent; #把http的域名请求转成https\n    }\n\n")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);